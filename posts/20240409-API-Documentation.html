<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>api.enstrayed.com Documentation</title>
    <link rel="stylesheet" href="/static/posts.css">
</head>
<body>
    <a href="https://enstrayed.com">Return to enstrayed.com</a>
    <h1>api.enstrayed.com Documentation</h1>
    <p>This page was last updated 2024-06-12.</p>
    <p>All GET endpoints are read-only unless otherwise noted. Recommended to use CTRL+F to find the endpoint you're looking for since I didn't feel like setting up anchors.</p>

    <h3>Permalinks to this page:</h3>
    <a href="https://etyd.cc/apidocs">https://etyd.cc/apidocs</a><br>

    <h3>Misc Notes:</h3>
    <p>If you'd like to report a problem, please open an issue <a href="https://github.com/Enstrayed/enstrayedapi/issues">here.</a></p>
    <p>The version listed at / is the commit that was cloned when the container was built.</p>

    <hr>


    <h2>GET /</h2>
    <a href="https://github.com/Enstrayed/enstrayedapi/blob/main/index.js#L27">../index.js:27</a>
    <p>Returns the commit the container is running in HTML format.</p>

    <h2>GET /blogposts</h2>
    <a href="https://github.com/Enstrayed/enstrayedapi/blob/main/routes/blog.js#L6">blog.js:6</a>
    <p>By default, this will return a JSON array with all of the blog posts on my website, however, if <code>?format=html</code> is used in the URL it will return the same but in HTML.</p>
    <p>The result will only include posts in the directory set in the servers config.json that match a naming convention.</p>

    <h2>GET /cider</h2>
    <p>⚠️NON FUNCTIONAL: Temporarily disabled due to issues with Docker containers not being able to communicate over Tailscale, this is pending a complete overhaul anyways.</p>
    <a href="https://github.com/Enstrayed/enstrayedapi/blob/main/routes/cider.js#L6">cider.js:6</a>
    <p>Returns JSON with the details about the song I'm currently listening to on Cider. Will return code <code>503</code> if Cider isn't open or is unreachable.</p>

    <h2>POST /cider</h2>
    <p>⚠️NON FUNCTIONAL: I got an Apple Music Family Plan so this isn't needed anymore, will likely be removed completely in the future.</p>
    <a href="https://github.com/Enstrayed/enstrayedapi/blob/main/routes/cider.js#L40">cider.js:40</a>
    <p>Sends a Stop Playback command to Cider. Will return code <code>503</code> if Cider isn't open or is unreachable.</p>
    <span>Required Headers:</span>
    <ul>
        <li><code>Authorization</code>: My API key, not yours, because I should be the only one using this.</li>
    </ul>

    <h2>GET /etyd</h2>
    <p>Internal use only: Requests to etyd.cc have their request rewritten to this endpoint.</p>

    <h2>POST /etyd</h2>
    <p>⚠️NON FUNCTIONAL: Endpoint will be available once the etyd-refactor branch is merged into main. If you want etyd.cc redirects added/updated please DM me.</p>

    <h2>DELETE /etyd</h2>
    <p>⚠️NON FUNCTIONAL: Endpoint will be available once the etyd-refactor branch is merged into main. If you want etyd.cc redirects added/updated please DM me.</p>

    <h2>GET /ip</h2>
    <a href="https://github.com/Enstrayed/enstrayedapi/blob/main/routes/ip.js#L3">ip.js:3</a>
    <p>Returns JSON containing the IP, Country and Cloudflare Ray IDs as present in the request headers.</p>    

    <h2>GET /headers</h2>
    <a href="https://github.com/Enstrayed/enstrayedapi/blob/main/routes/ip.js#L13">ip.js:13</a>
    <p>Returns JSON containing all the headers received by the server.</p>

    <h2>POST /sendemail</h2>
    <a href="https://github.com/Enstrayed/enstrayedapi/blob/main/routes/mailjet.js#L3">mailjet.js:3</a>
    <p>Some text here.</p>

    <span>Required Headers:</span>
    <ul>
        <li><code>Authorization</code>: Your API Key</li>
    </ul>
    <span>Required Body (JSON):</span>
    <pre><code>{
        "recipient": "recipientEmailHere",
        "subject": "emailSubjectHere",
        "message": "emailBodyHere"
}</code></pre>
</body>
</html>